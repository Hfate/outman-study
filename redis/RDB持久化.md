#RDB持久化
    
   + 简介
        
           Redis是内存数据库，一旦服务器进程退出，内存中保存的数据库状态就会丢失；RDB持久化便是将数据持久化到磁盘的一种方式，
           它既可以手动执行，也可以定期执行，其生成的RDB文件是一个经过压缩的二进制文件。
           
   + RDB文件的创建与载入
         
        + 创建
              
              SAVE命令直接阻塞服务器，创建RDB文件
              BGSAVE派生出一个子进程，创建RDB文件
        + 载入
             
              服务器启动时自动载入，服务器启动时会进入阻塞，直到载入完成为止
   
   + 自动间隔性保存
        
         // 服务器在900秒之内，对数据库进行了至少一次修改
         save 900 1                     
         // 服务器在300秒之内，对数据库进行了至少10次修改
         save 300 10
       
       
   + RDB文件结构
   
      + RDB文件结构
        
        | 名称 | 大小 | 说明|
        | :-----| :---- | :---- |
        | REDIS | 5bytes | 固定值,存放’R’,’E’,’D’,’I’,’S’|  
        | RDB_VERSION | 4bytes | RDB版本号|  
        | databases |  | 存储真正的数据|  
        | REDIS_RDB_OPCODE_EOF | 1byte | 255(0377),表述数据库结束| 
        | checksum |  | 	校验和|  
        
      + Databases结构  
      
         | 名称 | 大小 | 说明|
         | :-----| :---- | :---- |
         | RDB_OPCODE_SELECTDB | 1byte | 254,读到它时，接下来要读数据库的号|  
         | db_number | 1，2，5bytes | 存储数据库的号码，根据号码大小调大小|
         | key_value_pairs |  | 主要数据| 
         
      + key_value_pairs结构
      
         | 名称 | 大小 | 说明|
         | :-----| :---- | :---- |
         | RDB_OPCODE_EXPIRETIME_MS | 1byte | 252，说明是带过期时间的键值对| 
         | ms | 8bytes | 以毫秒为单位的时间戳|   
         | TYPE | 8bytes | 值对象的类型|
         | key |  | 键|
         | value |  | 值| 
         
         
   + 总结
      
       + RDB文件用于保存和还原Redis服务器所有数据库中的所有键值对数据
       + SAVE命令由服务器进程直接执行保存操作，所以该命令会阻塞服务器
       + BGSAVE令由子进程执行保存操作，所以该命令不会阻塞服务器
       + 服务器状态中会保存所有用save选项设置的保存条件，当任意一个保存条件满足时，服务器会执行BASAVE命令
       + RDB是一个经过压缩的二进制文件
       + 对于不同类型的键值对，RDB会以不同方式保存它   